---
title: 模板模式
date: 2023-12-22T22:13:13.000Z
tags: null
categories: Design Pattern
---

模板方法允许程序员实现一种算法骨架，在具体算法中实现骨架中的每个具体步骤而不改变骨架本身。

```c++
class GameAI {
  public:
   std::vector<Structure*> builtStructures;
    void turn() {
      collectResources();
      buildStructures();
      buildUnits();
      attack();
    }
    void collectResources() {
      for (Structure* s: builtStructures) {
        s->collect();
      }
    }
    virtual buildStructures() = 0;
    virtual buildUnits() = 0;
    void attack() {
      Enemy* e = closestEnemy();
      Map* m = getMap();
      if (e == nullptr) sendScouts(m->center);
      else sendWarriors(e->position);
    }
    virtual sendScouts(Coords pos) = 0;
    virtual sendWarriors(Coords pos) = 0;
};

class OrcsAI: public GameAI {
  void buildStructures() override {
    if (resourceAvailable()) {
      // build things
    }
  }
  void buildUnits() override {
    // build some units
  }
  // also implement sendScouts and sendWarriors
};

class MonsterAI: public GameAI {
  void collectResources() {
    return; // monsters don't collect resources
  }
  void buildStructures() {
    return; // monsters don't build structures
  }
  void buildUnits() {
    return; // monsters don't build units
  }
}
```
