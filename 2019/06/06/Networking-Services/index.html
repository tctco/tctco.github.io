<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Networking Services | TeaPort</title><meta name="author" content="Cheng,tctco2018@gmail.com"><meta name="copyright" content="Cheng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Google crash course  Networking Service Name Resolution DNS(Domain Name System): A global and highly distributed network service that resolves strings of letters into IP addresses for you. Domain Nam">
<meta property="og:type" content="article">
<meta property="og:title" content="Networking Services">
<meta property="og:url" content="https://tctco.github.io/2019/06/06/Networking-Services/index.html">
<meta property="og:site_name" content="TeaPort">
<meta property="og:description" content="Google crash course  Networking Service Name Resolution DNS(Domain Name System): A global and highly distributed network service that resolves strings of letters into IP addresses for you. Domain Nam">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tctco.github.io/images/memory.png">
<meta property="article:published_time" content="2019-06-06T01:09:49.000Z">
<meta property="article:modified_time" content="2025-11-27T12:25:33.373Z">
<meta property="article:author" content="Cheng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tctco.github.io/images/memory.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Networking Services",
  "url": "https://tctco.github.io/2019/06/06/Networking-Services/",
  "image": "https://tctco.github.io/images/memory.png",
  "datePublished": "2019-06-06T01:09:49.000Z",
  "dateModified": "2025-11-27T12:25:33.373Z",
  "author": [
    {
      "@type": "Person",
      "name": "Cheng",
      "url": "https://tctco.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://tctco.github.io/2019/06/06/Networking-Services/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3-b2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Networking Services',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3878240_kz3gpk6zi4c.css"><link rel="stylesheet" href="/static/css/bilibili.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">102</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/static/operations/"><i class="fa-fw iconfont icon-shoushudao1"></i><span> 技能考试</span></a></li><li><a class="site-page child" href="/static/radiations/"><i class="fa-fw iconfont icon-radiation"></i><span> 放射防护考试</span></a></li><li><a class="site-page child" href="/static/model/"><i class="fa-fw iconfont icon-jiandanmoxing"></i><span> 小鼠模型</span></a></li><li><a class="site-page child" href="/static/timetable"><i class="fa-fw iconfont icon--timetable"></i><span> 课表</span></a></li><li><a class="site-page child" href="/static/workingcard"><i class="fa-fw iconfont icon-bangdingyuangongka"></i><span> 员工卡</span></a></li><li><a class="site-page child" href="/static/radar"><i class="fa-fw iconfont icon-radarchart"></i><span> 雷达图</span></a></li><li><a class="site-page child" href="/static/audiogram"><i class="fa-fw iconfont icon-hearing"></i><span> 电测听</span></a></li><li><a class="site-page child" href="/static/medreconstruct"><i class="fa-fw iconfont icon-115"></i><span> 图像重建</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/static/cv"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/images/memory.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">TeaPort</span></a><a class="nav-page-title" href="/"><span class="site-name">Networking Services</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/static/operations/"><i class="fa-fw iconfont icon-shoushudao1"></i><span> 技能考试</span></a></li><li><a class="site-page child" href="/static/radiations/"><i class="fa-fw iconfont icon-radiation"></i><span> 放射防护考试</span></a></li><li><a class="site-page child" href="/static/model/"><i class="fa-fw iconfont icon-jiandanmoxing"></i><span> 小鼠模型</span></a></li><li><a class="site-page child" href="/static/timetable"><i class="fa-fw iconfont icon--timetable"></i><span> 课表</span></a></li><li><a class="site-page child" href="/static/workingcard"><i class="fa-fw iconfont icon-bangdingyuangongka"></i><span> 员工卡</span></a></li><li><a class="site-page child" href="/static/radar"><i class="fa-fw iconfont icon-radarchart"></i><span> 雷达图</span></a></li><li><a class="site-page child" href="/static/audiogram"><i class="fa-fw iconfont icon-hearing"></i><span> 电测听</span></a></li><li><a class="site-page child" href="/static/medreconstruct"><i class="fa-fw iconfont icon-115"></i><span> 图像重建</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/static/cv"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Networking Services</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-06-06T01:09:49.000Z" title="发表于 2019-06-06 01:09:49">2019-06-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-27T12:25:33.373Z" title="更新于 2025-11-27 12:25:33">2025-11-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Network/">Network</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p>Google crash course</p>
</blockquote>
<h1>Networking Service</h1>
<h2 id="Name-Resolution">Name Resolution</h2>
<p><strong>DNS(Domain Name System)</strong>: A global and highly distributed network service that resolves strings of letters into IP addresses for you.</p>
<p><strong>Domain Name</strong>: The term we use for something that can be resolved by DNS.</p>
<p><em>Eg: Domian Name: <a target="_blank" rel="noopener" href="http://www.weather.com">www.weather.com</a> IP address: 186.192.1.1</em></p>
<p>If the company wants to shift their original data center to another place, by using DNS, it can change what IP the domain resolves to and users will not know.</p>
<p>DNS is of global structure, so it lets organizations to decide which IP it will resolves to.</p>
<h3 id="The-Many-Steps-of-Name-Resolution">The Many Steps of Name Resolution</h3>
<p>DNS servers are one of the things that need to be specifically configured at a node on a network.</p>
<blockquote>
<p>For a computer to operate on a modern network, a few things need to be configured.</p>
<blockquote>
<p>MAC addresses are hard coded and tied to specific pieces of hardware.</p>
<p>IP address, Subnet mask and Gateway for a host also need to be specific configured.</p>
<p>The DNS server will be the last one. The computer will also operate on network without a DNS server but this is not convenient.</p>
</blockquote>
</blockquote>
<p>There are 5 different types of DNS servers:</p>
<ul>
<li>Caching names servers</li>
<li>Recursive name servers
<ul>
<li>Recursive name servers perform full DNS resolution requests.
<ol>
<li>User-query-&gt;Cashing/Recursive Name Server-query-&gt;13 Root Server(Anycast tech, today we can regard these 13 servers as 13 authoritives, not 13 computers)</li>
<li>13 Root Servers-<strong>TLD</strong> name server-&gt;Caching/Recursive Name Server</li>
<li>Caching/Recursive Name Server-query-&gt;TLD Name Servers(can be globally distributed which are responsible for each TLD)</li>
<li>TLD Name Servers-<strong>Authoritive Name Server</strong>-&gt;Caching/Recursive Name Server. <strong>Authoritive Name Servers</strong> are responsible for the last 2 parts of any domain name, which is the resolution at which a single organization might be responsible for DNS looks ups.</li>
<li>Caching/Recursive Name Server-query-&gt;Name Servers</li>
</ol>
</li>
<li>Caching and recursive name servers are to store known domain name lookups for a certain amount of time.</li>
<li>These 2 are usually privided by ISP.</li>
</ul>
</li>
<li>Root name servers</li>
<li>TLD name servers</li>
<li>Authoritative name servers</li>
</ul>
<p><strong>Remark</strong>: All domain names in a global DNS system have a <strong>TTL</strong>.</p>
<p><strong>TTL(Time to live)</strong>: A value, in seconds, that can be configured by the owner of a doman name for how long a name server is allowed to cache an entry before it should discard it and perform a full resolution again.</p>
<p><strong>Anycast</strong>: A technique that is used to route traffic to different destinations depending on factors like location, congestion, or link health.</p>
<p><strong>TLD(Top-level domain)</strong>: Represents the top of hierarchal DNS name resolution system. The last part of any domain name. <em>Eg: www . facebook . <strong>com</strong></em></p>
<p>This strictly hierarchal system prevent malicious parties from redirecting, since your computer will send info to the IP it receives. We rely on the hierarchy system controled by trusted entities.</p>
<p>Normal phones and computers also store some temporary DNS cache as well. Thus they will not bother their Local Name Server for every TCP connection.</p>
<h3 id="DNS-and-UDP">DNS and UDP</h3>
<p><strong>UDP is connectionless</strong>, if using DNS with TCP, there will be too much packets(setting up and shutting down). A DNS server cares only about responding the incoming look ups, and a DNS resolvers simply needs to perform look ups and redo them if not succeed.</p>
<p>In modern network, the DNS look ups responses might be too large to fit in a UDP datagram. In this situation, a DNS name server will respond with a packet explaining that the response is too large. The DNS client will then establish a TCP connection.</p>
<h2 id="Name-Resolution-in-Practice">Name Resolution in Practice</h2>
<h3 id="Resource-Record-Types">Resource Record Types</h3>
<p>DNS in practice operates with a set of defined resource record types. This allows different kinds of DNS resolutions to take place.</p>
<p>An <strong>A record</strong> is used to point a certain domain name at a certain IPv4 IP address.</p>
<p>An IP address is connected to a domain name but a domain name may contain many IP addresses. This needs a technique called <strong>DNS Round robin</strong>. It helps to balance traffic between multiple IPs.</p>
<p><strong>AAAA - Quad A record</strong>: Very similar to an A record except it returns an IPv6 address.</p>
<p>A <strong>CNAME record</strong> is used to redirect traffic from one domain name to another. <em>Eg: www . microsoft . com the company also wants that if someone types microsoft . com in the browser, he will be properly redirected. By configuring a CNAME <a target="_blank" rel="noopener" href="http://microsoft.com">microsoft.com</a> resolve to www . microsoft . com, the resolving client will know to perform another resolution attempt. This time for www . microsoft . com</em>. CNAME is also called <strong>Canonical Name</strong>.</p>
<p><strong>MX record - mail exchange</strong>: This resource record is used to deliver Email to the correct server. Many companies run their web service and email service on different machines with different IPs. <strong>MX record</strong> makes sure that the web traffic goes to the web server and email traffic to the email server.</p>
<p><strong>SRV record - service record</strong>: Similar to MX resource record type except that <strong>SRV record</strong> can be defined to return the specific of many different service types (MX only for email). <em>Eg: SRV records are often used to return the records like calendar and scheduling service</em></p>
<p><strong>TXT record - text</strong>: Often used to communicate configuration preferences about network services that user has trusted other organizations to handle for his domain. <em>Eg: TXT record used to convey additional info to an email as a service provider. A company handle the email delivery for the user!</em></p>
<h3 id="Anatomy-of-a-Domain-Name">Anatomy of a Domain Name</h3>
<p>Every domain name consists 3 main parts: <a target="_blank" rel="noopener" href="http://www.google.com">www.google.com</a><br>
<strong>Top level domain (TLD)</strong>: The last part of a doamin name (com). As the internet getting more crowded, more TLDs are added. This is organized by <strong>ICANN</strong>, The Internet Corporation for Assigned Names and Numbers.</p>
<p><strong>Domain</strong>: The second part (google).<br>
<strong>Domains</strong>: Used to demarcate where control moves from a TLD name server to an authoritative name server.</p>
<p><strong>Subdomain</strong>: The “www” part, sometimes also referred to as <strong>host name</strong> if it is assigned to only one host. People can have many subdomain names like: <a target="_blank" rel="noopener" href="http://host.sub.sub.subdomain.domain.com">host.sub.sub.subdomain.domain.com</a>. DNS can technically support up to <strong>127 levels</strong> of domain in total for a <strong>single fully qualified domain name</strong>.</p>
<p>Combine all these, <strong>Fully qualified domain name (FQDN)</strong>.</p>
<h3 id="DNS-Zones">DNS Zones</h3>
<p>A authoritive name server is responsible for a specific <strong>DNS zone</strong>.</p>
<p><strong>DNS zones</strong> are hierarcal concepts. Root name server: root zone. TLD namer server: zone covering its specific TLD. Authoritive name server: finer grain zones underneath. Zones <strong>do not overlap</strong>. This technique allows for easier control over multiple levels of a domain.</p>
<p>Zones are configured by <strong>Zone files</strong>, simple configuration files that declare all resource records for a particular zone. It has to contain <strong>SOA</strong>.</p>
<p><strong>Start of authority (SOA)</strong>: Declares the zone and the name of the name server that is authoritative for it. Along with <strong>SOA</strong>, <strong>NS</strong> is often found.</p>
<p><strong>NS records</strong>: Indicate other name servers that might also be responsible for this zone.</p>
<p><strong>Reverse lookup zone files</strong>: These let DNS resolvers ask for an IP and get the FQDN associated with it returned.</p>
<p><strong>Pointer resource record (PTR)</strong>: Resolves and IP to a name.</p>
<h2 id="Dynamic-Host-Configuration-Protocol">Dynamic Host Configuration Protocol</h2>
<h3 id="Overview-of-DHCP">Overview of DHCP</h3>
<p>4 things need to be configured:</p>
<ul>
<li>IP address</li>
<li>Subnet Mask</li>
<li>Gateway</li>
<li>Name server<br>
The letter 3 are almost the same on all the nodes in the same network. The IP address, however, is different. This configuration process requires a technique called <strong>DHCP</strong>.</li>
</ul>
<p><strong>Dynamic Host Configuration Protocol (DHCP)</strong>: An application layer protocol that automates the configuration process of hosts on a network.</p>
<p>A machine can query a DHCP server when the computer connects to the network and receives all the configurations in one go. DHCP reduces the administritive overhead and help to configure lots of devices. It also helps to address the problem of having to choose what IP to assign to what device.</p>
<p><strong>Dynamic allocation</strong> is the most common. A range of IP addresses is set aside for client devices and one of these IPs is issued to these devices when they request one.</p>
<p><strong>Automatic allocation</strong>: A range of IPaddresses is set aside for assignment purposes. The main difference is the DHCP server is asked to keep track of which IP is assigned to certain devices in the past. It will assign the same IP to the same device each time if posiible.</p>
<p><strong>Fixed allocation</strong>: Requires a manually specified list of MAC address and their corresponding IPs. If MAC not found, it may fall back to <strong>Dynamic</strong> or <strong>Automatic</strong> allocation or even refuse to assign an IP. (Security measure)</p>
<p>Along with things like IP addresses and othre configurations, <strong>NHCP</strong> is also used to assign things like <strong>Network time protocol (NTP) servers</strong>: Used to keep all computer on a network synchronized in time.</p>
<h3 id="DHCP-in-Action">DHCP in Action</h3>
<p>DHCP is an application layer protocol which relies on transport, network, data-link and physical layers. Interestingly, the main purpose for DHCP is to configure network layer itself. How can it complete this process without the network layer.</p>
<p><strong>DHCP discovery</strong>: The process by which a client configured to use DHCP attempts to get network configuration info.</p>
<ol>
<li>
<p>Server discovery: the DHCP client sends a</p>
<p>DHCP discover message on to the network. Both the machine’s IP and the DHCP server’s IP are unknown. A specially crafted broadcast message is formed instead.</p>
<ul>
<li>DHCP server listens on UDP port 67 and the DHCP discover message is sent from port 68.</li>
<li>Encapsulated in a UDP datagram, source port 68, destination port 67.</li>
<li>Encapsulated in an IP datagram, destination IP: 255.255.255.255, source IP: 0.0.0.0.</li>
</ul>
</li>
<li>
<p>DHCP server will respond according to its configurations. The respond will be sent as DHCPOFFER message.</p>
<ul>
<li>source port 67, destination port 68</li>
<li>destination 255.255.255.255, source IP its actual IP.</li>
<li>This is also a broadcast and will reach every machine on the network. The client will know it is for him because the DHCPOFFER has the field that specifies the MAC addresses of the client machine.</li>
</ul>
</li>
<li>
<p>The client process the DHCPOFFER.</p>
<ul>
<li>Sometimes rejects when multiple DHCP servers respond. Maybe accept the IP in a certain range (rare).</li>
</ul>
</li>
<li>
<p>The client responds with a DHCPREQUEST message.</p>
<ul>
<li>source: 0.0.0.0:68, destination IP:255.255.255.255:67.</li>
</ul>
</li>
<li>
<p>The server responds with a DHCPACK message.</p>
<ul>
<li>source actual IP of the server, port 67, destination: 255.255.255.255:68</li>
</ul>
</li>
</ol>
<p>All these configurations are called <strong>DHCP lease</strong>. Once it is expired, the DHCP client will need to negotiate with a new lease. When a client disconnects the network, it also releases the DHCP lease.</p>
<h2 id="Network-Address-Translation">Network Address Translation</h2>
<h3 id="Basics-of-NAT">Basics of NAT</h3>
<p><strong>Network Address Translation (NAT)</strong> is a technique instead of a defined standard. It takes one IP address and translates it to another. Reasons: security safe guards, preserving limited amount of IPv4 space.</p>
<p><strong>NAT</strong> is a technology that allows a geteway, usually a router or firewall, to rewrite the source IP of an outgoing IP datagram while retaining the original IP in order to rewrite it into the response.</p>
<p><strong>IP masquerading</strong>: Many computers on a network and their IPs being translated into the router’s IP. This is also known as <strong>One-to-many NAT</strong>. It is used in lots of LANS today.</p>
<h3 id="NAT-and-the-Transport-Layer">NAT and the Transport Layer</h3>
<p>NAT on the network layer is simply translating one IP into another. In the transport layer, serveral additional techs is introduced, however.</p>
<p>One-to-many NAT is easy for outbound traffic but difficult for inbound traffic. One easy way to realize this is through <strong>Port preservation</strong>.</p>
<p><strong>Port preservation</strong>: A technique where the source port chosen by a client is the same port used by the router. When 2 machines choose the same port, the router will choose another random port instead.</p>
<p><strong>Port forwarding</strong>: A technique where specific destination ports can be configured to always be delivered to specific nodes.</p>
<h3 id="NAT-Non-Routable-Address-Space-and-Limits-of-IPv4">NAT, Non-Routable Address Space, and Limits of IPv4</h3>
<p>IANA was responsible to assign address blocks to the 5 <strong>Regional internet registries (RIRs)</strong>. The IPv4 addresses will run out. To solve this problem, we need NAT and Non-Routable Address Spcae.</p>
<p>The main idea of this solution is that, many machines can use the Non-Routable Address Space inside a network with a router with a IPv4 address to represent them.</p>
<h2 id="VPNs-and-Proxies">VPNs and Proxies</h2>
<h3 id="Virtual-Private-Networks">Virtual Private Networks</h3>
<p><strong>Virtual Private Networks (VPN)</strong>: A tech that allows for the extension of a private or local network to hosts that might not be on that local network. Like NAT, VPN is also a general technology concept instead of a strictly defined protocol.</p>
<p>Most VPNs use the payload section on the transport layer to carry an encrpted payload that actually contains the entire payload of the entire second set of packets (the network, the tranport and the application layers of a packet) intended to traverse the remote network.</p>
<p><strong>Two-factor authentication</strong>: A technique where more than just a username and password are required to authenticate.</p>
<p>Usually, a short-lived numeric token is generated by the user through a specialized piece of hardware or software.</p>
<h3 id="Proxy-Services">Proxy Services</h3>
<p><strong>Proxy service</strong>: A server that acts on behalf of a client in order to access another service. Benefits: Anonymity, Security, Content filtering, Increased performance.</p>
<p>The main idea of proxy is an intermidiate server between a client and another server.</p>
<p>Gateway routers are some sort of Proxy.</p>
<p><strong>Web Proxies</strong>: The most common one, used for Web services. Nowadays, web proxy can censor the traffic through it and stopped the unwanted ones. <em>Eg: prevent workers browsing twitter during working hours by denying the access</em>.</p>
<p><strong>Reverse proxy</strong>: A service that might appear to be a single server to external clients, but actually represents many servers living behind it. Just like <strong>DNS round-robin</strong>, this is used as another kind of load-balancing. Another application is in encrypting and decrypting process.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://tctco.github.io">Cheng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://tctco.github.io/2019/06/06/Networking-Services/">https://tctco.github.io/2019/06/06/Networking-Services/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://tctco.github.io" target="_blank">TeaPort</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/images/memory.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2019/06/07/Connecting-to-the-Internet/" title="Connecting to the Internet"><img class="cover" src="/images/tardis.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Connecting to the Internet</div></div><div class="info-2"><div class="info-item-1"> Google crash course  Intro to Connecting to the Internet Intro to Connecting to the Internet Various Internet connection technologies. Wans and wireless and Cellular networking. POTS and Dial-up Dial-up, Modems and Point-to-Point Protocols Public switched telephone network (PSTN): This is also refered to as Plain old telephone service (POTS). The system is called USENET and still in use today. In the past, different organizations used the primitive form of Dial-up connection to exchange info...</div></div></div></a><a class="pagination-related" href="/2019/06/05/Transport-and-Application-Layers/" title="Transport and Application Layers"><img class="cover" src="/images/ink.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Transport and Application Layers</div></div><div class="info-2"><div class="info-item-1"> Google crash course  Transport and Application Layers Intro Transport layer: Allows traffic to be directed to specific network applications. Application layer: Allows these applications to communicate in a way they understand. The Transport Layer Multiplex and Demultiplex    Processes Multiplexer IP     IP Demultiplexer Processes    The transport layer handles this multiplexing and demultiplexing through Ports. Port: A 16-bit number used to direct traffic to specific services running on a ne...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Cheng</div><div class="author-info-description">Tech nerd, Amateur programmar, Medical Student</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">102</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tctco"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=859267560&amp;website=www.oicqzone.com" target="_blank" title=""><i class="fab fa-qq"></i></a><a class="social-icon" href="https://github.com/tctco" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:tctco2018@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Networking Service</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Name-Resolution"><span class="toc-number">1.1.</span> <span class="toc-text">Name Resolution</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Many-Steps-of-Name-Resolution"><span class="toc-number">1.1.1.</span> <span class="toc-text">The Many Steps of Name Resolution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS-and-UDP"><span class="toc-number">1.1.2.</span> <span class="toc-text">DNS and UDP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Name-Resolution-in-Practice"><span class="toc-number">1.2.</span> <span class="toc-text">Name Resolution in Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Resource-Record-Types"><span class="toc-number">1.2.1.</span> <span class="toc-text">Resource Record Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Anatomy-of-a-Domain-Name"><span class="toc-number">1.2.2.</span> <span class="toc-text">Anatomy of a Domain Name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS-Zones"><span class="toc-number">1.2.3.</span> <span class="toc-text">DNS Zones</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dynamic-Host-Configuration-Protocol"><span class="toc-number">1.3.</span> <span class="toc-text">Dynamic Host Configuration Protocol</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Overview-of-DHCP"><span class="toc-number">1.3.1.</span> <span class="toc-text">Overview of DHCP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP-in-Action"><span class="toc-number">1.3.2.</span> <span class="toc-text">DHCP in Action</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Network-Address-Translation"><span class="toc-number">1.4.</span> <span class="toc-text">Network Address Translation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basics-of-NAT"><span class="toc-number">1.4.1.</span> <span class="toc-text">Basics of NAT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NAT-and-the-Transport-Layer"><span class="toc-number">1.4.2.</span> <span class="toc-text">NAT and the Transport Layer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NAT-Non-Routable-Address-Space-and-Limits-of-IPv4"><span class="toc-number">1.4.3.</span> <span class="toc-text">NAT, Non-Routable Address Space, and Limits of IPv4</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VPNs-and-Proxies"><span class="toc-number">1.5.</span> <span class="toc-text">VPNs and Proxies</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Virtual-Private-Networks"><span class="toc-number">1.5.1.</span> <span class="toc-text">Virtual Private Networks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Proxy-Services"><span class="toc-number">1.5.2.</span> <span class="toc-text">Proxy Services</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/11/27/%E8%A7%A3%E5%86%B3%EF%BC%9AChatGPT%E6%8F%90%E7%A4%BA%E6%89%80%E5%9C%A8%E7%9A%84%E5%9C%B0%E5%8C%BA%E6%88%96%E5%9B%BD%E5%AE%B6%E4%B8%8D%E6%94%AF%E6%8C%81/" title="解决：ChatGPT提示所在的地区或国家不支持"><img src="/images/ink.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解决：ChatGPT提示所在的地区或国家不支持"/></a><div class="content"><a class="title" href="/2025/11/27/%E8%A7%A3%E5%86%B3%EF%BC%9AChatGPT%E6%8F%90%E7%A4%BA%E6%89%80%E5%9C%A8%E7%9A%84%E5%9C%B0%E5%8C%BA%E6%88%96%E5%9B%BD%E5%AE%B6%E4%B8%8D%E6%94%AF%E6%8C%81/" title="解决：ChatGPT提示所在的地区或国家不支持">解决：ChatGPT提示所在的地区或国家不支持</a><time datetime="2025-11-27T20:16:55.000Z" title="发表于 2025-11-27 20:16:55">2025-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/11/%E6%9C%89%E5%85%B3%E8%AE%BE%E8%AE%A1%E5%8C%BB%E5%AD%A6%E6%9C%8D%E5%8A%A1%E4%B8%AD%E5%8F%B0%E7%9A%84%E6%80%9D%E8%80%83/" title="有关设计医学服务中台的思考"><img src="/images/mountain.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="有关设计医学服务中台的思考"/></a><div class="content"><a class="title" href="/2025/11/11/%E6%9C%89%E5%85%B3%E8%AE%BE%E8%AE%A1%E5%8C%BB%E5%AD%A6%E6%9C%8D%E5%8A%A1%E4%B8%AD%E5%8F%B0%E7%9A%84%E6%80%9D%E8%80%83/" title="有关设计医学服务中台的思考">有关设计医学服务中台的思考</a><time datetime="2025-11-11T19:39:42.000Z" title="发表于 2025-11-11 19:39:42">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/31/js%E4%B8%8Ets/" title="js与ts"><img src="/images/ChristmasTrees.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="js与ts"/></a><div class="content"><a class="title" href="/2025/10/31/js%E4%B8%8Ets/" title="js与ts">js与ts</a><time datetime="2025-10-31T19:48:12.000Z" title="发表于 2025-10-31 19:48:12">2025-10-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/22/orthanc/" title="orthanc"><img src="/images/rocket.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="orthanc"/></a><div class="content"><a class="title" href="/2025/05/22/orthanc/" title="orthanc">orthanc</a><time datetime="2025-05-22T15:49:42.000Z" title="发表于 2025-05-22 15:49:42">2025-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/25/%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9B%B8%E5%85%B3/" title="虚拟机相关"><img src="/images/CMYK.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="虚拟机相关"/></a><div class="content"><a class="title" href="/2025/04/25/%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9B%B8%E5%85%B3/" title="虚拟机相关">虚拟机相关</a><time datetime="2025-04-25T22:25:51.000Z" title="发表于 2025-04-25 22:25:51">2025-04-25</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2025 By Cheng</span></div><div class="footer_custom_text">很高兴遇见你。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3-b2"></script><script src="/js/main.js?v=5.5.3-b2"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>