<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>The Network Layer | TeaPort</title><meta name="author" content="Cheng,tctco2018@gmail.com"><meta name="copyright" content="Cheng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="This is going to be a completely new part of my study in CS. This part won’t last long because I haven’t finished DataStructure and I’m going to learn assembly language. I learn this simply because my">
<meta property="og:type" content="article">
<meta property="og:title" content="The Network Layer">
<meta property="og:url" content="https://tctco.github.io/2019/06/04/The-Network-Layer/index.html">
<meta property="og:site_name" content="TeaPort">
<meta property="og:description" content="This is going to be a completely new part of my study in CS. This part won’t last long because I haven’t finished DataStructure and I’m going to learn assembly language. I learn this simply because my">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tctco.github.io/images/dopamine.png">
<meta property="article:published_time" content="2019-06-04T01:06:20.000Z">
<meta property="article:modified_time" content="2025-12-16T11:33:02.324Z">
<meta property="article:author" content="Cheng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tctco.github.io/images/dopamine.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The Network Layer",
  "url": "https://tctco.github.io/2019/06/04/The-Network-Layer/",
  "image": "https://tctco.github.io/images/dopamine.png",
  "datePublished": "2019-06-04T01:06:20.000Z",
  "dateModified": "2025-12-16T11:33:02.324Z",
  "author": [
    {
      "@type": "Person",
      "name": "Cheng",
      "url": "https://tctco.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://tctco.github.io/2019/06/04/The-Network-Layer/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3-b2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'The Network Layer',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_3878240_kz3gpk6zi4c.css"><link rel="stylesheet" href="/static/css/bilibili.css"><meta name="generator" content="Hexo 8.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">107</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/static/operations/"><i class="fa-fw iconfont icon-shoushudao1"></i><span> 技能考试</span></a></li><li><a class="site-page child" href="/static/radiations/"><i class="fa-fw iconfont icon-radiation"></i><span> 放射防护考试</span></a></li><li><a class="site-page child" href="/static/model/"><i class="fa-fw iconfont icon-jiandanmoxing"></i><span> 小鼠模型</span></a></li><li><a class="site-page child" href="/static/timetable"><i class="fa-fw iconfont icon--timetable"></i><span> 课表</span></a></li><li><a class="site-page child" href="/static/workingcard"><i class="fa-fw iconfont icon-bangdingyuangongka"></i><span> 员工卡</span></a></li><li><a class="site-page child" href="/static/radar"><i class="fa-fw iconfont icon-radarchart"></i><span> 雷达图</span></a></li><li><a class="site-page child" href="/static/audiogram"><i class="fa-fw iconfont icon-hearing"></i><span> 电测听</span></a></li><li><a class="site-page child" href="/static/medreconstruct"><i class="fa-fw iconfont icon-115"></i><span> 图像重建</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/static/cv"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/images/dopamine.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">TeaPort</span></a><a class="nav-page-title" href="/"><span class="site-name">The Network Layer</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/static/operations/"><i class="fa-fw iconfont icon-shoushudao1"></i><span> 技能考试</span></a></li><li><a class="site-page child" href="/static/radiations/"><i class="fa-fw iconfont icon-radiation"></i><span> 放射防护考试</span></a></li><li><a class="site-page child" href="/static/model/"><i class="fa-fw iconfont icon-jiandanmoxing"></i><span> 小鼠模型</span></a></li><li><a class="site-page child" href="/static/timetable"><i class="fa-fw iconfont icon--timetable"></i><span> 课表</span></a></li><li><a class="site-page child" href="/static/workingcard"><i class="fa-fw iconfont icon-bangdingyuangongka"></i><span> 员工卡</span></a></li><li><a class="site-page child" href="/static/radar"><i class="fa-fw iconfont icon-radarchart"></i><span> 雷达图</span></a></li><li><a class="site-page child" href="/static/audiogram"><i class="fa-fw iconfont icon-hearing"></i><span> 电测听</span></a></li><li><a class="site-page child" href="/static/medreconstruct"><i class="fa-fw iconfont icon-115"></i><span> 图像重建</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/static/cv"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">The Network Layer</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-06-04T01:06:20.000Z" title="发表于 2019-06-04 01:06:20">2019-06-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-12-16T11:33:02.324Z" title="更新于 2025-12-16 11:33:02">2025-12-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Network/">Network</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>This is going to be a completely new part of my study in CS. This part won’t last long because I haven’t finished DataStructure and I’m going to learn assembly language.</p>
<p>I learn this simply because my server was banned by the GFW and I need some extra knowledge to prevent this from happening again.</p>
<p>Good Luck!</p>
<blockquote>
<p>Google Crash Course</p>
</blockquote>
<h1>The Network Layer</h1>
<p>Describing the IP addressing scheme and subnetingworks.</p>
<h2 id="The-Network-Layer">The Network Layer</h2>
<p>MAC addresses are useful in a small scale. But they are <strong>not ordered</strong>.<br>
<strong>Address resolution protocol</strong></p>
<h3 id="IP-Address">IP Address</h3>
<p>8 digits <strong>Dotted decimal notation</strong>: 11111111.11111111.11111111.11111111</p>
<p>IP Addresses are distributed in large areas and companies and organizations. IP addresses belong to networks, not to the devices attached to those networks. But the <strong>MAC</strong> address will not change.</p>
<p>Eg: You laptop’s IP will change if you change the network it connects from your home to a cafe. The MAC won’t.</p>
<p><strong>Dynamic Host Configuration Protocol</strong>: For a modern device, once it connects to a router, it will automatically be assigned an IP Address(<strong>Dynamic IP address</strong>).</p>
<p><strong>Static IP address</strong>: It has to be configured mannually. In most cases, static IP addresses are reserved for servers and network devices, while dynamic IP addresses are reserved for clients.</p>
<h3 id="IP-Datagrams-and-Encapsulation">IP Datagrams and Encapsulation</h3>
<p>Packet in this layer is called <strong>IP datagram</strong>.</p>
<p><strong>IP datagram</strong>: A highly structured series of fields that are strictly defined.</p>
<table>
<thead>
<tr>
<th>0~4</th>
<th>4~8</th>
<th>8~16</th>
<th>16~19</th>
<th>19~31</th>
</tr>
</thead>
<tbody>
<tr>
<td>Version</td>
<td>Header Length</td>
<td>Service Type</td>
<td>Total Length</td>
<td>Total Length</td>
</tr>
<tr>
<td>Identification</td>
<td>Identification</td>
<td>Identification</td>
<td>Flags</td>
<td>Fragment Offset</td>
</tr>
<tr>
<td>TTL</td>
<td>TTL</td>
<td>Protocol</td>
<td>Header Checksum</td>
<td>Header Checksum</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>Source IP Address</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>-</td>
<td>Destination IP Address</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Options</td>
<td>Options</td>
<td>Options</td>
<td>Options</td>
<td>Padding</td>
</tr>
</tbody>
</table>
<p><strong>Remark</strong>: The most common version of IP is version 4, <strong>IPv4</strong>.</p>
<p><strong>Header Length field</strong>: Almost always 20 bytes in length when dealing with IPv4.</p>
<p><strong>Service Type field</strong>: These 8 digits can be used to specify details about quality of service, or <strong>QoS</strong>(to make routers choose which IP datagram is more important), technologies.</p>
<p><strong>Total Length field</strong>:Indicates the total length of the IP datagram it’s attached to. Thus the maximum size of a single datagram: <strong>65535</strong>.</p>
<p><strong>Identification field</strong>: 16-bit number used to group messages together.</p>
<p>If the data is larger than 65535, the IP layer needs to split this data up into many invidual packets.</p>
<p><strong>Flag field</strong>: Used to indicate if a datagram is allowed to be fragmented, or to indicate that the datagram has already been fragmented.</p>
<p><strong>Fragmentation</strong>: Process of taking a single IP datagram and splitting it up into several smaller datagrams.</p>
<p><strong>Time to Live (TTL) field</strong>: indicate how many router hops a datagram can traverse before it’s thrown away. In case of a loop, the routers needn’t to continue transfering the data.</p>
<p><strong>Protocol field</strong>: Contains data about what transport layer protocol is being used (TCP/UDP).</p>
<p><strong>Header checksum field</strong>: A checksum of the contents of the entire IP datagram header (as TTL changes, the checksum changes too!).</p>
<p><strong>Source IP Address and Destination IP Address</strong>:32 bits</p>
<p><strong>IP options field</strong>: Optional. Used to set special characteristics for datagrams primarily used for testing purposes.</p>
<p><strong>Padding</strong>: A series of 0 to ensure the header is the correct total size. (Since the size of IP optional fields is unknown).</p>
<h4 id="Data-payload-section">Data payload section</h4>
<p>This is what IP datagram is. And this process is called <strong>Encapsulation</strong>.</p>
<h2 id="Encapsulation">Encapsulation</h2>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>Message &gt; Application</p>
</blockquote>
<p>(TCP/UDP header)Message &gt; Transport</p>
</blockquote>
<p>(IP header)TCP segment or UDP datagram &gt; Network</p>
</blockquote>
<p>(Ethernet header)IP datagram(ethernet footer) &gt; Data-link</p>
</blockquote>
<h3 id="IP-Address-Classes">IP Address Classes</h3>
<p>2 sections: <strong>network ID</strong> and <strong>host ID</strong>.</p>
<p>Eg: 9.100.100.100<br>
9 will be network ID, and 100.100.100 will be the host ID.</p>
<p><strong>Address class system</strong>: A way of defining how the global IP address space is split up.<br>
<em>Network ID and Host ID</em><br>
<strong>Class A</strong>:1+3(0~126, 0)<br>
<strong>Class B</strong>:2+2(128~191, 10)<br>
<strong>Class C</strong>:3+1(192~224, 110)<br>
There are also Class D and E(used for testing purposes).</p>
<p>Inpractice, these classes have been replaced by <strong>CIDR</strong>: Classless inter-domain routing.</p>
<h3 id="Addresses-Resolution-Protocol-ARP">Addresses Resolution Protocol (ARP)</h3>
<p>A protocol used to discover the hardware address of a node with a certain IP address.</p>
<p><strong>ARP table</strong>: a list of IP addresses and the MAC addresses associated with them.</p>
<p>A Eg should be like this:</p>
<ol>
<li>Host A wants to send a message to 10.20.30.40 but this is not in its ARP table.</li>
<li>Host A broadcast FF: FF: FF: FF: FF: FF</li>
<li>ARP broadcast is received and ARP response is sent back. This will contain the MAC address in question.</li>
</ol>
<p>ARP table entries generally expire after a short amount of time to ensure changes in the network are accounted for.</p>
<h2 id="Subnetting">Subnetting</h2>
<h3 id="Subnet-masks">Subnet masks</h3>
<p>We have already know that IP addresses can be splitted into 2 sections. The Host ID and the Network ID.</p>
<p>If we go deeper into the IP addresses, we will need: <strong>Subnet ID</strong>.</p>
<p>In the Internet level, the core routers only care about the network ID and use it to send datagram to the <strong>gateway routers</strong>. Then the gateway routers (with some additional information) can send the datagram to the destination machine or the next router.</p>
<p>The Host ID is used for the last router to send the datagram to the recipient machine.</p>
<p>Subnet IDs are calculated by using <strong>Subnet masks</strong>: 32-bit numbers that are normally written out as 4 octets in decimal.</p>
<hr>
<p><em>How does it work?</em><br>
IP address: 9.100.100.1009.100.100.100<br>
Then in binary: 00001001.01100100.01100100.0110010000001001.01100100.01100100.01100100<br>
Subnet mask: 11111111.11111111.11111111.0000000011111111.11111111.11111111.00000000</p>
<p>The “1” parts is to tell a router what part is the subnet ID.</p>
<p>In this case, only the last octect is available for the Host ID. Since 0 is not used and 255 is reserved for broadcast, only 1~254 are available to assign to the host.</p>
<p>This is the famous Subnet mask: 255.255.255.0255.255.255.0</p>
<p>Another example:<br>
Subnet mask: 255.255.255.224255.255.255.224<br>
also written by: 11111111.11111111.11111111.1110000011111111.11111111.11111111.11100000<br>
In this case, the host ID space will be 5 bits.</p>
<p>Since this Subnet ID is consists of 27 “1”s and 5 “0”s, a quicker way to represent this should be: 9.100.100.100/279.100.100.100/27</p>
<p>Subnet mask is a way for a computer to use <strong>AND operators</strong> to determine if an IP address exists on the same network.</p>
<p>The computer that runs this operation can compare the result with its own network ID to determine if the address is on the same network.</p>
<h3 id="CIDR">CIDR</h3>
<p>A even more flexible way to describe blocks of IP addresses. It expands on the concept that subneting by using subnet masks to <strong>Demarcate</strong> networks.</p>
<p><strong>Demarcate</strong>: to demarcate sth means to set sth off.</p>
<p><strong>Demarcation point</strong>: To describe where one network or system ends and another one begins.</p>
<p><strong>CIDR notation</strong>: 9.100.100.100/249.100.100.100/24</p>
<p>If a company wants 2 Class C, it can simply use Subnet mask of 255.255.254.0/23255.255.254.0/23. This also saves 2 IP addressed since 256∗2−2=510256∗2−2=510.</p>
<h2 id="Routers">Routers</h2>
<h3 id="Basic-Concepts">Basic Concepts</h3>
<p><strong>Router</strong>: A network device that forwards traffic depending on the destination address of that traffic.</p>
<ol>
<li>Receive data packet</li>
<li>Examines destination IP</li>
<li>Looks up IP destination network in routing table</li>
<li>Forward traffic to destination</li>
</ol>
<h3 id="Routing-table">Routing table</h3>
<p>4 Coulumns:</p>
<ul>
<li>Destination network(IP and Subnet address / CIDR)</li>
<li>Next hop</li>
<li>Total hops</li>
<li>Interface</li>
</ul>
<h3 id="Interior-Gateway-Protocol">Interior Gateway Protocol</h3>
<p>Problem: Quickest path?<br>
<strong>Routing protocols</strong>: Routers communicates to each other. It can be divided into 2 categories: <strong>interior gateway protocols</strong> and <strong>exterior gateway protocols</strong>.</p>
<p><strong>Interior gateway protocols</strong>: Used by routers to share info within a single <strong>autonomous system</strong>, which is a collection of networks all fall under the control of a single network operator. Eg: Many routers employed by a internet service provider who is usually in reaches or usually national scale.</p>
<p><strong>Interior gateway protocols</strong> are further split into 2 categories: <strong>Link state routing protocols</strong> and <strong>distance-vector protocols</strong>.</p>
<p><strong>Distance-vector protocols</strong> are older of standard, list of networks are how far away in terms of hubs. Then the router will send this list to every routers it connects. In CS, a list is called a <strong>vector</strong>.</p>
<blockquote>
<p>Distance-vector protocols care about the neighbors while Link state routing protocols are more complex(more data and a strong algorithm).</p>
</blockquote>
<h3 id="Exterior-gateway-protocols">Exterior gateway protocols</h3>
<p>Exchange info between different organizations.</p>
<p><strong>Internet Assigned Numbers Authority (IANA)</strong>: NGO that helps manage things like IP address allocation and <strong>ASN, Autonomous System Number</strong> allocation.</p>
<p><strong>ASN</strong>: Numbers assigned to indicidual autonomous systems.</p>
<h3 id="Non-Routable-Address-Space">Non-Routable Address Space</h3>
<p>The establishment of RFC, Request for Comments.</p>
<p>Not all computers on the internet need to connect to other computers on the internet! Non-Routabnle Address Space allows for nodes on such a network to communicate with each other but no gateway router will attend to forward traffic to this type of network.</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>10.0.0.0</mn><mi mathvariant="normal">/</mi><mn>810.0.0.0</mn><mi mathvariant="normal">/</mi><mn>8</mn><mspace linebreak="newline"></mspace><mn>172.16.0.0</mn><mi mathvariant="normal">/</mi><mn>12172.16.0.0</mn><mi mathvariant="normal">/</mi><mn>12</mn><mspace linebreak="newline"></mspace><mn>192.168.0.0</mn><mi mathvariant="normal">/</mi><mn>16192.168.0.0</mn><mi mathvariant="normal">/</mi><mn>16</mn><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">10.0.0.0/810.0.0.0/8\\

172.16.0.0/12172.16.0.0/12\\

192.168.0.0/16192.168.0.0/16\\
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">10.0.0.0/810.0.0.0/8</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">172.16.0.0/12172.16.0.0/12</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">192.168.0.0/16192.168.0.0/16</span></span><span class="mspace newline"></span></span></span></span></p>
<p>This Non-routable address space is also related to <strong>NAT, Network Address Translation</strong>.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://tctco.github.io">Cheng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://tctco.github.io/2019/06/04/The-Network-Layer/">https://tctco.github.io/2019/06/04/The-Network-Layer/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://tctco.github.io" target="_blank">TeaPort</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/images/dopamine.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2019/06/05/Transport-and-Application-Layers/" title="Transport and Application Layers"><img class="cover" src="/images/ChristmasTrees.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Transport and Application Layers</div></div><div class="info-2"><div class="info-item-1"> Google crash course  Transport and Application Layers Intro Transport layer: Allows traffic to be directed to specific network applications. Application layer: Allows these applications to communicate in a way they understand. The Transport Layer Multiplex and Demultiplex    Processes Multiplexer IP     IP Demultiplexer Processes    The transport layer handles this multiplexing and demultiplexing through Ports. Port: A 16-bit number used to direct traffic to specific services running on a ne...</div></div></div></a><a class="pagination-related" href="/2019/05/03/DataStructure-Isomorphism-of-Trees/" title="DataStructure Isomorphism of Trees"><img class="cover" src="/images/CMYK.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">DataStructure Isomorphism of Trees</div></div><div class="info-2"><div class="info-item-1"> Zhejiang University  Understanding of the Puzzle We simply regard the trees as the same as long as they have the same children for every node. Divide and Conquer  The representation of a binary tree Build a Binary Tree Judge whether they are Isomers.  Representing a Binary Tree Static Linked List: A Special Array. Structure of the Program 12345678BinTree Build();bool Judge();int main()&#123;    Build tree1;   Build tree2;    Judge isomers;    return 0;&#125; Design the Functions 12345678#def...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Cheng</div><div class="author-info-description">Tech nerd, Amateur programmar, Medical Student</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">107</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tctco"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=859267560&amp;website=www.oicqzone.com" target="_blank" title=""><i class="fab fa-qq"></i></a><a class="social-icon" href="https://github.com/tctco" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:tctco2018@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">The Network Layer</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Network-Layer"><span class="toc-number">1.1.</span> <span class="toc-text">The Network Layer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP-Address"><span class="toc-number">1.1.1.</span> <span class="toc-text">IP Address</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP-Datagrams-and-Encapsulation"><span class="toc-number">1.1.2.</span> <span class="toc-text">IP Datagrams and Encapsulation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-payload-section"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">Data payload section</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Encapsulation"><span class="toc-number">1.2.</span> <span class="toc-text">Encapsulation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP-Address-Classes"><span class="toc-number">1.2.1.</span> <span class="toc-text">IP Address Classes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Addresses-Resolution-Protocol-ARP"><span class="toc-number">1.2.2.</span> <span class="toc-text">Addresses Resolution Protocol (ARP)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subnetting"><span class="toc-number">1.3.</span> <span class="toc-text">Subnetting</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Subnet-masks"><span class="toc-number">1.3.1.</span> <span class="toc-text">Subnet masks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CIDR"><span class="toc-number">1.3.2.</span> <span class="toc-text">CIDR</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Routers"><span class="toc-number">1.4.</span> <span class="toc-text">Routers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Basic-Concepts"><span class="toc-number">1.4.1.</span> <span class="toc-text">Basic Concepts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Routing-table"><span class="toc-number">1.4.2.</span> <span class="toc-text">Routing table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interior-Gateway-Protocol"><span class="toc-number">1.4.3.</span> <span class="toc-text">Interior Gateway Protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exterior-gateway-protocols"><span class="toc-number">1.4.4.</span> <span class="toc-text">Exterior gateway protocols</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Non-Routable-Address-Space"><span class="toc-number">1.4.5.</span> <span class="toc-text">Non-Routable Address Space</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/14/%E8%A7%A3%E5%86%B3python%E4%B8%ADrequests%E7%AD%89%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/" title="解决python中requests等代理配置问题"><img src="/images/mountain.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解决python中requests等代理配置问题"/></a><div class="content"><a class="title" href="/2025/12/14/%E8%A7%A3%E5%86%B3python%E4%B8%ADrequests%E7%AD%89%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/" title="解决python中requests等代理配置问题">解决python中requests等代理配置问题</a><time datetime="2025-12-14T22:56:44.000Z" title="发表于 2025-12-14 22:56:44">2025-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/04/AGENTS/" title="AGENTS"><img src="/images/memory.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AGENTS"/></a><div class="content"><a class="title" href="/2025/12/04/AGENTS/" title="AGENTS">AGENTS</a><time datetime="2025-12-04T11:58:10.000Z" title="发表于 2025-12-04 11:58:10">2025-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/02/SOP/" title="SOP"><img src="/images/rocket.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SOP"/></a><div class="content"><a class="title" href="/2025/12/02/SOP/" title="SOP">SOP</a><time datetime="2025-12-02T16:37:39.000Z" title="发表于 2025-12-02 16:37:39">2025-12-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/02/portainer%E6%97%A0%E6%B3%95%E5%88%A9%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E8%AE%BF%E9%97%AE%E7%9A%84%E9%97%AE%E9%A2%98/" title="portainer无法利用自签名证书访问的问题"><img src="/images/ink.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="portainer无法利用自签名证书访问的问题"/></a><div class="content"><a class="title" href="/2025/12/02/portainer%E6%97%A0%E6%B3%95%E5%88%A9%E7%94%A8%E8%87%AA%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E8%AE%BF%E9%97%AE%E7%9A%84%E9%97%AE%E9%A2%98/" title="portainer无法利用自签名证书访问的问题">portainer无法利用自签名证书访问的问题</a><time datetime="2025-12-02T16:28:35.000Z" title="发表于 2025-12-02 16:28:35">2025-12-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/28/%E7%94%A8VSCode%E5%86%99cpp%E9%A1%B9%E7%9B%AE/" title="用VSCode写cpp项目"><img src="/images/piano.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用VSCode写cpp项目"/></a><div class="content"><a class="title" href="/2025/11/28/%E7%94%A8VSCode%E5%86%99cpp%E9%A1%B9%E7%9B%AE/" title="用VSCode写cpp项目">用VSCode写cpp项目</a><time datetime="2025-11-28T22:28:21.000Z" title="发表于 2025-11-28 22:28:21">2025-11-28</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2025 By Cheng</span></div><div class="footer_custom_text">很高兴遇见你。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3-b2"></script><script src="/js/main.js?v=5.5.3-b2"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>