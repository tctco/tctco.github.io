import{s as E,d as I,o as G,c as O,a as p,w as b,v as y,F as S,b as T,e as U}from"./vendor.218e436e.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}};z();var j=(r,t)=>{const n=r.__vccOpts||r;for(const[i,e]of t)n[i]=e;return n};let C=600,R=400;function _(r){let t=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"];return t[r%t.length]}let f=130,v=4;const q={name:"vue-line-chart",data(){return{graphData:{fieldNames:["\u8BED\u6587","\u6570\u5B66","\u5916\u8BED","\u7269\u7406","\u5316\u5B66","\u751F\u7269","\u653F\u6CBB","\u5386\u53F2"],values:[[10,20,30,40,50,60,70,80]],bars:[[5,10,20,30,20,10,20,10]],labels:["\u5C0F\u660E"]},inputData:"",inputBar:"",main:null,radar:{},rangeMax:100,fixed:0,labels:""}},mounted(){this.initGrid(),this.plotGrid(),this.plotTicks(),this.plotLabels()},methods:{initGrid(){this.main=E("#radar-graph").append("g").classed("main",!0).attr("transform","translate("+C/2+","+R/2+")"),this.radar.webs=this.main.append("g").classed("webs",!0),this.radar.areas=this.main.append("g").classed("areas",!0),this.radar.lines=this.main.append("g").classed("lines",!0),this.radar.texts=this.main.append("g").classed("texts",!0),this.radar.ticks=this.main.append("g").classed("ticks",!0),this.radar.labels=this.main.append("g").classed("labels",!0)},plotGrid(){let r=this.graphData.fieldNames.length,t=0,i=2*Math.PI/r,e={webs:[],webPoints:[]};for(let l=v;l>0;l--){let o="",h=[],c=f/v*l;for(let u=0;u<r;u++){let x=c*Math.sin(u*i),m=c*Math.cos(u*i);o+=x+","+m+" ",h.push({x,y:m})}e.webs.push(o),e.webPoints.push(h)}console.log(e),this.radar.webs.selectAll("polygon").remove(),this.radar.webs.selectAll("polygon").data(e.webs).enter().append("polygon").attr("points",l=>l).exit().remove(),this.radar.lines.selectAll("line").remove(),this.radar.lines.selectAll("line").data(e.webPoints[0]).enter().append("line").attr("x1",0).attr("y1",0).attr("x2",l=>l.x).attr("y2",l=>l.y).exit().remove();let s=[],a=this.graphData.values,g=this.graphData.bars;for(let l=0;l<a.length;l++){let o=a[l],h="",c="",u="",x=[],m=g[l];for(let d=0;d<r;d++){let D=f*(o[d]-t)/(this.rangeMax-t),A=f*(o[d]+m[d]-t)/(this.rangeMax-t),N=Math.max(0,f*(o[d]-m[d]-t)/(this.rangeMax-t)),k=D*Math.sin(d*i),L=D*Math.cos(d*i),V=A*Math.sin(d*i),B=A*Math.cos(d*i),F=N*Math.sin(d*i),P=N*Math.cos(d*i);c+="L"+V+" "+B+" ",u+="L"+F+" "+P+" ",h+=k+","+L+" ",x.push({x:k,y:L})}s.push({polygon:h,points:x,outer:"M"+c.slice(1,-1)+"z ",inner:"M"+u.slice(1,-1)+"z "})}this.radar.areas.selectAll("g").remove(),this.radar.areas.selectAll("g").data(s).enter().append("g").attr("class",(l,o)=>"area"+(o+1));for(let l=0;l<s.length;l++){let o=this.radar.areas.select(".area"+(l+1)),h=s[l];o.append("polygon").attr("points",h.polygon).attr("stroke",function(c,u){return _(l)}).attr("fill",function(c,u){return _(l)}).attr("fill-opacity",(c,u)=>0),o.append("path").attr("d",h.outer+h.inner).attr("fill",(c,u)=>_(l)).attr("fill-opacity",.5).attr("fill-rule","evenodd")}let w=[],M=f+20;for(let l=0;l<r;l++){let o=M*Math.sin(l*i),h=M*Math.cos(l*i);w.push({x:o,y:h})}this.radar.texts.selectAll("text").remove(),this.radar.texts.selectAll("text").data(w).enter().append("text").attr("x",l=>l.x).attr("y",l=>l.y).text((l,o)=>this.graphData.fieldNames[o])},plotTicks(){let r=[];for(let t=1;t<=v;t++)r.push({x:5,y:f/v*t,data:this.rangeMax/v*t});this.radar.ticks.selectAll("text").remove(),this.radar.ticks.selectAll("text").data(r).enter().append("text").attr("x",t=>t.x).attr("y",t=>t.y).text(t=>t.data.toFixed(this.fixed))},plotLabels(){this.radar.labels.selectAll("g").remove();let r=this.radar.labels.selectAll("g").data(this.graphData.labels).enter().append("g");r.append("rect").attr("x",200).attr("y",(t,n)=>100+n*20).attr("width",25).attr("height",15).attr("fill",(t,n)=>_(n)),r.append("text").attr("x",200+30).attr("y",(t,n)=>100+9+n*20).text(t=>t)},downloadSVG(){I(document.getElementById("radar-graph"))}},watch:{inputData(r,t){let n=r.split(`
`),i=n[0].split(","),e=[];for(let s=1;s<n.length;s++){let a=n[s].split(",").map(parseFloat);console.log(isNaN(a[a.length-1]),a[a.length-1]),!(!a||a.length!=i.length||isNaN(a[a.length-1]))&&e.push(a)}if(e.length>0){this.graphData.fieldNames=i,this.graphData.values=e;let s=new Array(e.length);for(let a=0;a<e.length;a++)s[a]=new Array(e[0].length).fill(0);for(let a=0;a<Math.min(e.length,this.graphData.bars.length);a++)for(let g=0;g<Math.min(e[0].length,this.graphData.bars[0].length);g++)s[a][g]=this.graphData.bars[a][g];this.graphData.bars=s,this.plotGrid()}},inputBar(r,t){let n=r.split(`
`);for(let i=0;i<n.length;i++)n[i].split(",").map(parseFloat).forEach((s,a)=>{a>=this.graphData.values[0].length||isNaN(s)||(this.graphData.bars[i][a]=s)}),console.log(this.graphData.bars);this.plotGrid()},rangeMax(r,t){isNaN(parseFloat(r))||(this.rangeMax=parseFloat(r),this.plotGrid(),this.plotTicks())},fixed(r,t){isNaN(parseInt(r))||(this.fixed=parseInt(r),this.plotTicks())},labels(r,t){let n=new Array(this.graphData.values.length),i=r.split(",");for(let e=0;e<Math.min(n.length,i.length);e++)n[e]=i[e];this.graphData.labels=n,this.plotLabels()}}},K=p("div",{class:"container"},[p("svg",{id:"radar-graph",width:"100%",height:"100%"})],-1),H={class:"form-container"},J=p("span",null,"maxRange: ",-1),Q=p("span",null,"toFixed: ",-1),W=p("span",null,"Labels: ",-1);function X(r,t,n,i,e,s){return G(),O(S,null,[K,p("div",H,[b(p("textarea",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.inputData=a),placeholder:"Enter data..."},null,512),[[y,e.inputData]]),b(p("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.inputBar=a),placeholder:"Enter bar (std) size..."},null,512),[[y,e.inputBar]]),J,b(p("input",{placeholder:"upper bound...","onUpdate:modelValue":t[2]||(t[2]=a=>e.rangeMax=a)},null,512),[[y,e.rangeMax]]),Q,b(p("input",{placeholder:"to fixed...","onUpdate:modelValue":t[3]||(t[3]=a=>e.fixed=a)},null,512),[[y,e.fixed]]),W,b(p("input",{placeholder:"Lebels...","onUpdate:modelValue":t[4]||(t[4]=a=>e.labels=a)},null,512),[[y,e.labels]]),p("button",{onClick:t[5]||(t[5]=(...a)=>s.downloadSVG&&s.downloadSVG(...a))},"download")])],64)}var Y=j(q,[["render",X]]);const Z={setup(r){return(t,n)=>(G(),T(Y))}};U(Z).mount("#app");
